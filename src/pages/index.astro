---
import Layout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import Card from '../components/Card.astro';

const allProjects = (await getCollection('project', (entry) => {
  return entry.data.rank !== undefined;
}))
  .sort((a, b) => a.data.rank! - b.data.rank!);
---

<style>
  header {
    font-size: 1.2rem;
    font-weight: 600;
    margin-left: 1.5rem;
    margin-right: 1.5rem;
  }
  section {
    margin-left: 1.5rem;
    margin-right: 1.5rem;
  }

  p {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .showcase {
    margin-top: 1.5rem;
  }

  .showcase p {
    font-size: 1.2rem;
    font-weight: 600;
  }

  .card-container {
    display: grid;
    grid-gap: 1rem;
  }

  .card {
    border: 1px solid lightgray;
    border-radius: 6px;
    display: flex;
  }
</style>

<Layout title="Hamologist">
  <header>
    <p>Hello, I'm Jordan :^)</p>
  </header>
  <section>
    <p>I'm a software engineer and this is my little slice of the internet. I keep my projects here and write about technical things I find interesting.</p>
  </section>
  <section class="showcase">
    <p>Projects</p>
    <div class="card-container">
      {allProjects.slice(0, 3).map(project => (
        <Card
          title={project.data.title}
          description={project.data.description}
        />
      ))}
    </div>
  </section>
  <section class="showcase">
    <p>Latest Posts</p>
  </section>
</Layout>

